<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <title layout:fragment="title">–¢–∞—Ä–∏—Ñ—ã</title>
</head>

<div layout:fragment="header"
     th:replace="~{partials/header-marketing :: header}">
</div>

<main layout:fragment="content" class="py-5">
    <div class="container-xl">

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–∞—Ä–∏—Ñ–æ–≤ -->
        <h1 class="page-title text-center mb-4">–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã</h1>

        <!-- üîò –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
        <div class="text-center mb-4">
            <div class="btn-group" role="group">
                <button type="button" id="btn-monthly" class="btn btn-primary">–ú–µ—Å—è—Ü</button>
                <button type="button" id="btn-yearly" class="btn btn-outline-secondary">–ì–æ–¥</button>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è —Å —Ç–∞—Ä–∏—Ñ–Ω—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏ -->

        <div class="row justify-content-center g-4">

            <div class="col-12 col-sm-6 col-md-4 col-lg-3" th:each="plan : ${plans}">
                <div class="card h-100 shadow-sm border-0 rounded-4 d-flex flex-column position-relative">
                    <div th:if="${plan.recommended}" class="recommended-label">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</div>
                    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ (—É—Ä–æ–≤–µ–Ω—å h3 —Å–ª–µ–¥—É–µ—Ç –∑–∞ –æ–±—â–∏–º h2) -->
                    <h3 class="text-center fw-bold fs-3 mt-3 mb-1" th:text="${plan.name}">Premium</h3>
                    <div class="text-center mb-2" th:if="${plan.recommended}">
                        <span class="recommended-label">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</span>
                    </div>

                    <!-- –¶–µ–Ω–∞ (–µ–∂–µ–º–µ—Å—è—á–Ω–æ) -->
                    <p class="text-center mb-2 mt-2 fw-semibold fs-5 price-monthly text-dark"
                       th:if="${plan.monthlyPriceLabel != null}"
                       th:text="${plan.monthlyPriceLabel}">15 BYN/–º–µ—Å</p>

                    <p class="text-center mb-2 mt-2 fs-6 text-muted price-placeholder price-monthly"
                       th:unless="${plan.monthlyPriceLabel != null}">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</p>

                    <!-- –¶–µ–Ω–∞ (–µ–∂–µ–≥–æ–¥–Ω–æ) -->
                    <div class="price-yearly d-none text-center">
                        <p class="mb-1 fw-semibold fs-5 text-dark"
                           th:if="${plan.annualPriceLabel != null}"
                           th:text="${plan.annualPriceLabel}">150 BYN/–≥–æ–¥</p>

                        <p class="mb-2 text-muted small"
                           th:if="${plan.annualFullPriceLabel != null}">
                            <s th:text="${plan.annualFullPriceLabel}">180 BYN</s>
                            <span class="discount-label" th:text="${plan.annualDiscountLabel}">–≤—ã–≥–æ–¥–∞ ‚àí17%</span>
                        </p>
                    </div>

                    <p class="text-center mb-2 mt-2 fs-6 text-muted price-placeholder price-yearly d-none"
                       th:unless="${plan.annualPriceLabel != null}">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</p>

                    <div class="card-body px-4 d-flex flex-column">
                        <ul class="tariff-features list-unstyled mb-4 flex-grow-1">
                            <li>üì• –¢—Ä–µ–∫–æ–≤ –≤ —Ñ–∞–π–ª–µ:
                                <strong th:text="${plan.maxTracksPerFile != null ? plan.maxTracksPerFile : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤:
                                <strong th:text="${plan.maxSavedTracks != null ? plan.maxSavedTracks : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å:
                                <strong th:text="${plan.maxTrackUpdates != null ? plan.maxTrackUpdates : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üè¨ –ú–∞–≥–∞–∑–∏–Ω–æ–≤:
                                <strong th:text="${plan.maxStores}"></strong>
                            </li>
                            <li>
                                <span th:if="${plan.allowBulkUpdate}">‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                                <span th:unless="${plan.allowBulkUpdate}" class="text-muted">‚ùå –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                            </li>
                            <li>
                                <span th:if="${plan.allowAutoUpdate}">‚ôªÔ∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤</span>
                                <span th:unless="${plan.allowAutoUpdate}" class="text-muted">‚ùå –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤</span>
                            </li>
                            <li>
                                <span th:if="${plan.allowTelegramNotifications}">üì® Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                <span th:unless="${plan.allowTelegramNotifications}" class="text-muted">‚ùå Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            </li>
                            <li>
                                <span th:if="${plan.allowCustomNotifications}">üîî –°–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                <span th:unless="${plan.allowCustomNotifications}" class="text-muted">‚ùå –°–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            </li>
                        </ul>


                        <!-- ü§ù –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞ —ç—Ç–æ–º —Ç–∞—Ä–∏—Ñ–µ -->
                        <div th:if="${userProfile != null && userProfile.subscriptionCode == plan.code}" class="mt-auto">
                            <button class="btn btn-outline-secondary w-100" disabled
                                    th:text="${userProfile.subscriptionEndDate != null ? '–í–∞—à —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω –¥–æ ' + userProfile.subscriptionEndDate : '–í–∞—à —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω'}">
                            </button>
                        </div>

                        <!-- ‚¨á –¢–∞—Ä–∏—Ñ –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–≥–æ -->
                        <div th:if="${authenticatedUser != null && userPlanPosition != null && plan.position < userPlanPosition}" class="mt-auto">
                            <button class="btn btn-outline-secondary w-100" disabled>–£ –≤–∞—Å –≤—ã—à–µ —Ç–∞—Ä–∏—Ñ</button>
                        </div>

                        <!-- üîí –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö -->
                        <div th:if="${plan.code == 'FREE' && authenticatedUser == null}" class="mt-auto">
                            <a href="/auth/registration" class="btn btn-primary w-100">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                        </div>

                        <!-- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ -->
                            <form th:if="${plan.code != 'FREE' && (userProfile == null || userPlanPosition == null || plan.position > userPlanPosition)}"
                                  th:action="@{/pricing/buy}" method="post" class="mt-auto">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" th:if="${_csrf != null}"/>
                            <input type="hidden" id="monthsInput" name="months" value="1"/>
                            <input type="hidden" name="plan" th:value="${plan.code}"/>
                            <button type="submit" class="btn btn-primary w-100"
                                    th:text="${authenticatedUser != null && userPlanPosition != null && plan.position > userPlanPosition ? '–£–ª—É—á—à–∏—Ç—å –ø–ª–∞–Ω' : '–ö—É–ø–∏—Ç—å'}"></button>
                        </form>

                    </div>

                </div>
            </div>

        </div>
    </div>

    <script th:src="@{/js/marketing/pricing.js}"></script>

</main>

</html>
