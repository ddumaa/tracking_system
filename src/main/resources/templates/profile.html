<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <title layout:fragment="title">–ü—Ä–æ—Ñ–∏–ª—å</title>
</head>

<main layout:fragment="content">
    <div class="container-xl">
        <div class="row">

            <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –º–µ–Ω—é (–º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
            <button class="menu-toggle d-md-none" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#settingsSidebar" title="–ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫">
                <i class="bi bi-gear" title="–ú–µ–Ω—é"></i>
            </button>

            <!-- Offcanvas –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="offcanvas offcanvas-start" tabindex="-1" id="settingsSidebar"
                 aria-labelledby="settingsSidebarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="settingsSidebarLabel">–ú–µ–Ω—é</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="nav flex-column nav-pills profile-tab-menu" id="v-pills-tab-offcanvas" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active d-flex align-items-center" id="v-pills-home-tab-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-home" role="tab">
                            <i class="bi bi-person me-2" title="–û–± –∞–∫–∫–∞—É–Ω—Ç–µ"></i> –û–± –∞–∫–∫–∞—É–Ω—Ç–µ
                        </a>
                        <a class="nav-link d-flex align-items-center" id="stores-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-stores" role="tab">
                            <i class="bi bi-shop me-2" title="–ú–æ–∏ –º–∞–≥–∞–∑–∏–Ω—ã"></i> –ú–æ–∏ –º–∞–≥–∞–∑–∏–Ω—ã
                        </a>
                        <a class="nav-link d-flex align-items-center" id="notifications-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-notifications" role="tab">
                            <i class="bi bi-bell me-2" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram)"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram)
                        </a>
                        <a class="nav-link d-flex align-items-center" id="automation-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-automation" role="tab">
                            <i class="bi bi-lightning-charge me-2" title="–§—É–Ω–∫—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"></i> –§—É–Ω–∫—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
                        </a>
                        <a class="nav-link d-flex align-items-center" id="plan-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-plan" role="tab">
                            <i class="bi bi-speedometer2 me-2" title="–¢–∞—Ä–∏—Ñ –∏ –ª–∏–º–∏—Ç—ã"></i> –¢–∞—Ä–∏—Ñ –∏ –ª–∏–º–∏—Ç—ã
                        </a>
                        <a class="nav-link d-flex align-items-center" id="integrations-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-integrations" role="tab">
                            <i class="bi bi-link-45deg me-2" title="–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API)"></i> –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API)
                        </a>
                        <a class="nav-link d-flex align-items-center" id="security-settings-link-offcanvas" data-bs-toggle="pill"
                           href="#v-pills-security" role="tab">
                            <i class="bi bi-shield-lock me-2" title="–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"></i> –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                        </a>
                    </div>
                </div>
            </div>

            <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é (–¥–ª—è –ü–ö –∏ –ø–ª–∞–Ω—à–µ—Ç–æ–≤) -->
            <div class="col-lg-3 col-md-4 d-none d-md-block">
                <div class="card shadow-sm p-4 rounded-4 sticky-sidebar">
                    <h5 class="mb-3 text-center">–ú–µ–Ω—é</h5>
                    <div class="nav flex-column nav-pills profile-tab-menu" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active d-flex align-items-center" id="v-pills-home-tab" data-bs-toggle="pill"
                           href="#v-pills-home" role="tab">
                            <i class="bi bi-person me-2" title="–û–± –∞–∫–∫–∞—É–Ω—Ç–µ"></i> –û–± –∞–∫–∫–∞—É–Ω—Ç–µ
                        </a>
                        <a class="nav-link d-flex align-items-center" id="stores-settings-link" data-bs-toggle="pill"
                           href="#v-pills-stores" role="tab">
                            <i class="bi bi-shop me-2" title="–ú–æ–∏ –º–∞–≥–∞–∑–∏–Ω—ã"></i> –ú–æ–∏ –º–∞–≥–∞–∑–∏–Ω—ã
                        </a>
                        <a class="nav-link d-flex align-items-center" id="notifications-settings-link" data-bs-toggle="pill"
                           href="#v-pills-notifications" role="tab">
                            <i class="bi bi-bell me-2" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram)"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram)
                        </a>
                        <a class="nav-link d-flex align-items-center" id="automation-settings-link" data-bs-toggle="pill"
                           href="#v-pills-automation" role="tab">
                            <i class="bi bi-lightning-charge me-2" title="–§—É–Ω–∫—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"></i> –§—É–Ω–∫—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
                        </a>
                        <a class="nav-link d-flex align-items-center" id="plan-settings-link" data-bs-toggle="pill"
                           href="#v-pills-plan" role="tab">
                            <i class="bi bi-speedometer2 me-2" title="–¢–∞—Ä–∏—Ñ –∏ –ª–∏–º–∏—Ç—ã"></i> –¢–∞—Ä–∏—Ñ –∏ –ª–∏–º–∏—Ç—ã
                        </a>
                        <a class="nav-link d-flex align-items-center" id="integrations-settings-link" data-bs-toggle="pill"
                           href="#v-pills-integrations" role="tab">
                            <i class="bi bi-link-45deg me-2" title="–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API)"></i> –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API)
                        </a>
                        <a class="nav-link d-flex align-items-center" id="security-settings-link" data-bs-toggle="pill"
                           href="#v-pills-security" role="tab">
                            <i class="bi bi-shield-lock me-2" title="–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"></i> –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                        </a>
                    </div>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
            <div class="col-lg-9 col-md-8 tab-content" id="v-pills-tabContent">

<div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="mb-3">–û–± –∞–∫–∫–∞—É–Ω—Ç–µ</h5>
        <hr class="my-3">
        <div class="row mb-2">
            <div class="col-sm-4 text-muted">Email</div>
            <div class="col-sm-8" th:text="${userProfile.email}"></div>
        </div>
        <div class="row mb-2">
            <div class="col-sm-4 text-muted">–¢–∞—Ä–∏—Ñ</div>
            <div class="col-sm-8">
                <span th:class="'badge ' + (${userProfile.subscriptionCode == 'PREMIUM'} ? 'bg-success' : 'bg-secondary')"
                      th:text="${userProfile.subscriptionDisplayName}"></span>
            </div>
        </div>
        <div class="row mb-2" th:if="${userProfile.subscriptionEndDate != null}">
            <div class="col-sm-4 text-muted">–û–ø–ª–∞—á–µ–Ω–æ –¥–æ</div>
            <div class="col-sm-8" th:text="${userProfile.subscriptionEndDate}"></div>
        </div>
        <div class="row mb-2">
            <div class="col-sm-4 text-muted">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</div>
            <div class="col-sm-8" th:text="${userProfile.timezone}"></div>
        </div>
    </div>
</div>

<div class="tab-pane fade" id="v-pills-stores" role="tabpanel" aria-labelledby="stores-settings-link">

                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                    <div id="storeNotificationContainer"></div>

                    <div class="card p-3 shadow-sm rounded-4 mb-4">

                        <h5 class="mb-3">
                            –ú–æ–∏ –º–∞–≥–∞–∑–∏–Ω—ã
                            <span class="text-muted" id="store-limit" th:text="${storeLimit}"></span>
                        </h5>

                        <form id="store-settings-form">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                            <table class="table">
                                <thead>
                                <tr>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                                </thead>
                                <tbody id="storeTableBody">
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                                </tbody>
                            </table>

                            <button type="button" class="btn btn-primary mt-3" id="addStoreBtn">–î–æ–±–∞–≤–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω
                            </button>
                        </form>
                    </div>

                    <div class="card p-3 shadow-sm rounded-4 mb-4">
                        <div class="mt-4" id="analytics-management">
                            <h5 class="mb-3">
                                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
                            </h5>
                            <div id="storeAnalyticsButtons" class="d-flex flex-wrap gap-2 mb-3">
                                <!-- –ö–Ω–æ–ø–∫–∏ ‚Äî —á–µ—Ä–µ–∑ JS --></div>
                            <button type="button" class="btn btn-danger d-flex align-items-center"
                                    id="resetAllAnalyticsBtn">
                                <i class="bi bi-trash me-2"></i>
                                –£–¥–∞–ª–∏—Ç—å –≤—Å—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
                            </button>
                        </div>
                    </div>

                </div>

<div class="tab-pane fade" id="v-pills-notifications" role="tabpanel" aria-labelledby="notifications-settings-link">
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="mb-3">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram)</h5>
        <form id="telegram-notifications-form" class="mt-2">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <div class="form-check form-switch">
                <!-- –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –≤—ã–∫–ª—é—á–µ–Ω -->
                <input class="form-check-input" type="checkbox" id="telegramNotificationsToggle"
                       th:checked="${planDetails.allowTelegramNotifications and userSettingsDTO.telegramNotificationsEnabled}"
                       th:disabled="${!planDetails.allowTelegramNotifications}">
                <label class="form-check-label" for="telegramNotificationsToggle">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö –ø–æ—Å—ã–ª–æ–∫</label>
            </div>
            <p class="form-text text-danger ms-4" th:if="${!planDetails.allowTelegramNotifications}">
                –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ö–æ–º–∞–Ω–¥–∞" –∏ –≤—ã—à–µ
            </p>
        </form>
    </div>
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <div id="telegram-management" class="mt-4">
            <h5 class="mb-3">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram</h5>
            <p class="form-text text-danger" th:if="${!planDetails.allowTelegramNotifications}">
                –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ö–æ–º–∞–Ω–¥–∞" –∏ –≤—ã—à–µ
            </p>
            <p class="text-muted mb-3">
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –≤ Telegram. –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç
                –ø–æ–ª—É—á–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö –ø–æ—Å—ã–ª–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞¬ª, ¬´–ø—Ä–∏–±—ã–ª–∞
                –≤ –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏¬ª –∏ –¥—Ä.).
            </p>
            <th:block th:each="store, iter : ${stores}">
                <div th:replace="~{profile :: telegramStoreBlock(store=${store}, first=${iter.first})}"></div>
            </th:block>
        </div>
    </div>
</div>

<div class="tab-pane fade" id="v-pills-automation" role="tabpanel" aria-labelledby="automation-settings-link">
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="mb-3">–§—É–Ω–∫—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h5>
        <form id="auto-update-form" class="mt-2">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="autoUpdateToggle"
                       th:checked="${planDetails.allowAutoUpdate ? userProfile.autoUpdateEnabled : false}"
                       th:disabled="${!planDetails.allowAutoUpdate}">
                <label class="form-check-label" for="autoUpdateToggle">–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤</label>
            </div>
            <p class="form-text text-danger ms-4" th:if="${!planDetails.allowAutoUpdate}">
                –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ë–∏–∑–Ω–µ—Å" –∏ –≤—ã—à–µ
            </p>
            <p class="form-text ms-4">–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥—É—é—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.</p>
        </form>
        <form id="bulk-button-form" class="mt-3">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="showBulkUpdateButton"
                       th:checked="${planDetails.allowBulkUpdate ? userSettingsDTO.showBulkUpdateButton : false}"
                       th:disabled="${!planDetails.allowBulkUpdate}">
                <label class="form-check-label" for="showBulkUpdateButton">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</label>
            </div>
            <p class="form-text text-danger ms-4" th:if="${!planDetails.allowBulkUpdate}">
                –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ë–∏–∑–Ω–µ—Å" –∏ –≤—ã—à–µ
            </p>
        </form>
    </div>
</div>

<div class="tab-pane fade card p-3 shadow-sm rounded-4 mb-4" id="v-pills-plan" role="tabpanel" aria-labelledby="plan-settings-link">
    <h5 class="mb-3">–¢–∞—Ä–∏—Ñ –∏ –ª–∏–º–∏—Ç—ã</h5>
    <p class="fw-semibold mb-2">–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ:
        <span class="badge bg-primary" th:text="${planDetails.name}"></span>
    </p>
    <ul class="list-unstyled">
        <li>üì• –¢—Ä–µ–∫–æ–≤ –≤ —Ñ–∞–π–ª–µ:
            <strong th:text="${planDetails.maxTracksPerFile != null ? planDetails.maxTracksPerFile : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
        </li>
        <li>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤:
            <strong th:text="${planDetails.maxSavedTracks != null ? userProfile.savedTracksUsed + '/' + planDetails.maxSavedTracks : userProfile.savedTracksUsed + '/‚àû'}"></strong>
        </li>
        <li>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å:
            <strong th:text="${planDetails.maxTrackUpdates != null ? userProfile.trackUpdatesUsed + '/' + planDetails.maxTrackUpdates : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
        </li>
        <li>üè¨ –ú–∞–≥–∞–∑–∏–Ω–æ–≤:
            <strong th:text="${userProfile.storesUsed + '/' + planDetails.maxStores}"></strong>
        </li>
        <li>
            <span th:if="${planDetails.allowBulkUpdate}">‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
            <span th:unless="${planDetails.allowBulkUpdate}" class="text-muted">‚ùå –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
        </li>
        <li>
            <span th:if="${planDetails.allowAutoUpdate}">‚ôªÔ∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤</span>
            <span th:unless="${planDetails.allowAutoUpdate}" class="text-muted">‚ùå –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤</span>
        </li>
        <li>
            <span th:if="${planDetails.allowTelegramNotifications}">üì® Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            <span th:unless="${planDetails.allowTelegramNotifications}" class="text-muted">‚ùå Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
        </li>
        <li>
            <span th:if="${planDetails.allowCustomBot}">ü§ñ –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ—Ç</span>
            <span th:unless="${planDetails.allowCustomBot}" class="text-muted">‚ùå –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ—Ç</span>
        </li>
    </ul>
</div>

<div class="tab-pane fade" id="v-pills-integrations" role="tabpanel" aria-labelledby="integrations-settings-link">
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
        <div id="evropostNotificationContainer"></div>
        <div id="evropost-content" th:fragment="evropostFragment">
            <h5 class="mb-3">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ï–≤—Ä–æ–ø–æ—á—Ç—ã</h5>
            <form id="evropost-settings-form" th:action="@{/profile/settings/evropost}" th:object="${evropostCredentialsDTO}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="useCustomCredentials" name="useCustomCredentials" th:field="*{useCustomCredentials}">
                    <label class="form-check-label" for="useCustomCredentials">–ü–æ–¥–∫–ª—é—á–∏—Ç—å API –ï–≤—Ä–æ–ø–æ—á—Ç—ã (–¥–æ–≥–æ–≤–æ—Ä ‚Äì –±–µ—Å–ø–ª–∞—Ç–Ω–æ)</label>
                </div>
                <div id="custom-credentials-fields" class="hidden">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="evropostUsername" name="evropostUsername" th:field="*{evropostUsername}" placeholder="LoginName" autocomplete="off">
                        <label for="evropostUsername">LoginName</label>
                        <div th:errors="*{evropostUsername}" class="text-danger"></div>
                    </div>
                    <div class="form-floating mb-3 position-relative">
                        <input type="password" class="form-control password-input" id="evropostPassword" name="evropostPassword" th:field="*{evropostPassword}" placeholder="Password" autocomplete="off">
                        <label for="evropostPassword">Password</label>
                        <span class="toggle-password" data-target="evropostPassword">
                            <i class="bi bi-eye"></i>
                        </span>
                        <div th:errors="*{evropostPassword}" class="text-danger"></div>
                    </div>
                    <div class="form-floating mb-3 position-relative">
                        <input type="password" class="form-control password-input" id="serviceNumber" name="serviceNumber" th:field="*{serviceNumber}" placeholder="ServiceNumber" autocomplete="off">
                        <label for="serviceNumber">ServiceNumber</label>
                        <span class="toggle-password" data-target="serviceNumber">
                            <i class="bi bi-eye"></i>
                        </span>
                        <div th:errors="*{serviceNumber}" class="text-danger"></div>
                    </div>
                    <button class="btn btn-primary btn-sm w-100" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </div>
            </form>
        </div>
    </div>
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="mb-3">–ë–µ–ª–ø–æ—á—Ç–∞</h5>
        <p>–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ API –ë–µ–ª–ø–æ—á—Ç—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.</p>
        <p class="fw-semibold">–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏:</p>
        <p>üìß <a href="mailto:info@belivery.by" class="text-decoration-none">info@belivery.by</a></p>
    </div>
</div>

<div class="tab-pane fade" id="v-pills-security" role="tabpanel" aria-labelledby="security-settings-link">
    <div class="card p-3 shadow-sm rounded-4 mb-4">
        <div id="password-content" th:fragment="passwordFragment">
            <h5 class="mb-3">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h5>
            <form id="password-settings-form" th:action="@{/profile/settings/password}" th:object="${passwordChangeDTO}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="form-floating mb-3 position-relative">
                    <input type="password" class="form-control password-input" id="currentPassword" name="currentPassword" th:field="*{currentPassword}" placeholder="–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" autocomplete="off">
                    <label for="currentPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                    <span class="toggle-password" data-target="currentPassword">
                        <i class="bi bi-eye"></i>
                    </span>
                    <div th:errors="*{currentPassword}" class="text-danger"></div>
                </div>
                <div class="form-floating mb-3 position-relative">
                    <input type="password" class="form-control password-input" id="newPassword" name="newPassword" th:field="*{newPassword}" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" autocomplete="off">
                    <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <span class="toggle-password" data-target="newPassword">
                        <i class="bi bi-eye"></i>
                    </span>
                    <div th:errors="*{newPassword}" class="text-danger"></div>
                </div>
                <div class="form-floating mb-3 position-relative">
                    <input type="password" class="form-control password-input" id="confirmPassword" name="confirmPassword" th:field="*{confirmPassword}" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off">
                    <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <span class="toggle-password" data-target="confirmPassword">
                        <i class="bi bi-eye"></i>
                    </span>
                    <div th:errors="*{confirmPassword}" class="text-danger"></div>
                </div>
                <div th:if="${notification}" class="mb-3">
                    <p th:text="${notification}" class="text-success"></p>
                </div>
                <button class="btn btn-primary w-100 py-2" type="submit">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
            </form>
        </div>
    </div>
    <div class="card p-4 shadow-sm rounded-4">
        <h5 class="mb-3">–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h5>
        <p class="fw-semibold"><strong>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</strong></p>
        <ul>
            <li>–í—Å—è –≤–∞—à–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç <strong>–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω–∞</strong>, –≤–∫–ª—é—á–∞—è:
                <ul>
                    <li>–ò—Å—Ç–æ—Ä–∏—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å—ã–ª–æ–∫</li>
                    <li>–í—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –¥–∞–Ω–Ω—ã–µ</li>
                    <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
                </ul>
            </li>
        </ul>
        <p>
            <strong>–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ</strong> ‚Äì –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø.
            –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–æ–º, –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è
            <strong>—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å –Ω—É–ª—è</strong>.
        </p>
        <p>
            <strong>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:</strong>
            –ï—Å–ª–∏ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–ª <strong>–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏</strong>,
            –æ–Ω–∏ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç <strong>–∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</strong>.
        </p>
        <p class="text-uppercase fw-bold">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        <button class="btn btn-danger w-50 py-2" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">
            <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
        </button>
    </div>
</div>
                </div>
            </div>
        </div>
    </div>
</main>

<th:block th:fragment="telegramStoreBlock(store, first)" th:remove="tag">
    <div th:id="'store-block-' + ${store.id}" class="mt-3 border p-3 rounded bg-light-subtle">
        <div th:if="${storeIdWithError == store.id}" class="alert alert-danger py-2" th:text="${templateError}"></div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º -->
        <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
                <h5 class="mb-1" th:text="${store.name}">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</h5>

                <div class="mb-1">
                    <div class="bot-selector">
                        <input type="radio"
                               th:id="'tg-bot-system-' + ${store.id}"
                               th:name="'tg-bot-type-' + ${store.id}"
                               value="system"
                               th:checked="${store.telegramSettings?.botToken == null}">
                        <label th:for="'tg-bot-system-' + ${store.id}">–°–∏—Å—Ç–µ–º–Ω—ã–π –±–æ—Ç</label>

                        <input type="radio"
                               th:id="'tg-bot-custom-' + ${store.id}"
                               th:name="'tg-bot-type-' + ${store.id}"
                               value="custom"
                               th:checked="${store.telegramSettings?.botToken != null}"
                               th:disabled="${!planDetails.allowCustomBot}"
                               th:attr="data-bs-toggle=${!planDetails.allowCustomBot} ? 'tooltip' : null,
                                    title=${!planDetails.allowCustomBot} ? '–î–æ—Å—Ç—É–ø–Ω–æ –≤ —Ç–∞—Ä–∏—Ñ–µ \'–ë–∏–∑–Ω–µ—Å\' –∏ –≤—ã—à–µ' : null">
                              <label th:for="'tg-bot-custom-' + ${store.id}" th:id="'tg-custom-bot-label-' + ${store.id}">
                                  <span th:text="${store.telegramSettings?.botUsername != null ? '@' + store.telegramSettings.botUsername : '–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ—Ç'}"></span>
                              </label>
                    </div>
                    <!-- –§–æ—Ä–º–∞ —Ç–æ–∫–µ–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –±–æ—Ç–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ JS –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) -->
                    <div th:id="'tg-custom-bot-fields-' + ${store.id}" class="mb-2 ms-4 hidden custom-bot-fields" th:if="${planDetails.allowCustomBot}">
                        <label class="form-label" th:for="'tg-token-' + ${store.id}">–¢–æ–∫–µ–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞</label>
                        <input type="text" class="form-control form-control-sm" th:id="'tg-token-' + ${store.id}"
                               name="botToken" th:value="${store.telegramSettings?.botToken}">
                        <p class="form-text current-bot" th:if="${store.telegramSettings?.botUsername}">
                            –¢–µ–∫—É—â–∏–π –±–æ—Ç: <span th:text="${store.telegramSettings.botUsername}"></span>
                        </p>
                        <div class="d-flex gap-2 mt-2">
                            <button type="button" class="btn btn-sm btn-outline-primary me-2"
                                    th:id="'tg-save-bot-' + ${store.id}">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <button type="button" class="btn btn-sm btn-outline-danger"
                                    th:id="'tg-delete-bot-' + ${store.id}">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                </div>

                <p class="form-text text-danger mb-1" th:unless="${planDetails.allowCustomBot}">
                    –§—É–Ω–∫—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ë–∏–∑–Ω–µ—Å" –∏ –≤—ã—à–µ
                </p>
            </div>

            <button type="button" class="btn btn-sm btn-outline-secondary toggle-tg-btn"
                    th:attr="data-store-id=${store.id}">
                <i class="bi bi-chevron-up"></i>
            </button>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div th:id="'collapse-tg-' + ${store.id}"
             class="tg-settings-content"
             th:attr="data-store-id=${store.id}"
             th:classappend="${first} ? ' expanded' : ' collapsed'">

            <form class="telegram-settings-form" th:action="@{/stores/{id}/telegram-settings(id=${store.id})}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                <div class="form-check form-switch mb-2">
                    <input class="form-check-input" type="checkbox" th:id="'tg-enable-' + ${store.id}" name="enabled"
                           th:checked="${store.telegramSettings != null and store.telegramSettings.enabled}"
                           th:disabled="${!planDetails.allowTelegramNotifications or !userSettingsDTO.telegramNotificationsEnabled}">
                    <label class="form-check-label" th:for="'tg-enable-' + ${store.id}">
                        –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞
                    </label>
                </div>
                <p class="form-text ms-4">
                    –ü–æ–ª—É—á–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –ø–æ—Å—ã–ª–∫–∏: ¬´–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞¬ª, ¬´–ø—Ä–∏–±—ã–ª–∞¬ª, ¬´–ø–æ–ª—É—á–µ–Ω–∞¬ª –∏ –¥—Ä.
                </p>

                <div th:id="'tg-reminders-block-' + ${store.id}"
                     class="form-check form-switch mb-2 ms-3 hidden reminders-container">
                    <input class="form-check-input" type="checkbox" th:id="'tg-reminders-' + ${store.id}"
                           name="remindersEnabled"
                           th:checked="${store.telegramSettings?.remindersEnabled}"
                           th:disabled="${!planDetails.allowTelegramNotifications or !userSettingsDTO.telegramNotificationsEnabled}">
                    <label class="form-check-label" th:for="'tg-reminders-' + ${store.id}">
                        –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –µ—Å–ª–∏ –ø–æ—Å—ã–ª–∫–∞ –Ω–µ –∑–∞–±—Ä–∞–Ω–∞
                    </label>
                </div>

                <div th:id="'tg-reminder-fields-' + ${store.id}" class="ms-4 hidden reminder-fields">
                    <div class="mb-2">
                        <label class="form-label" th:for="'tg-start-' + ${store.id}">
                            –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ—Å–ª–µ –ø—Ä–∏–±—ã—Ç–∏—è –ø–æ—Å—ã–ª–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
                        </label>
                        <input type="number" class="form-control form-control-sm" th:id="'tg-start-' + ${store.id}"
                               name="reminderStartAfterDays"
                               th:value="${store.telegramSettings?.reminderStartAfterDays ?: 3}" min="1" max="14">
                    </div>
                    <div class="mb-2">
                        <label class="form-label" th:for="'tg-repeat-' + ${store.id}">
                            –ö–∞–∫ —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –µ—Å–ª–∏ –ø–æ—Å—ã–ª–∫–∞ –Ω–µ –∑–∞–±—Ä–∞–Ω–∞ (–≤ –¥–Ω—è—Ö)
                        </label>
                        <input type="number" class="form-control form-control-sm" th:id="'tg-repeat-' + ${store.id}"
                               name="reminderRepeatIntervalDays"
                               th:value="${store.telegramSettings?.reminderRepeatIntervalDays ?: 2}" min="1" max="14">
                    </div>
                    <div class="mb-2">
    <label class="form-label" th:for="'tg-remind-tpl-' + ${store.id}">–¢–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</label>
    <textarea class="form-control form-control-sm"
              th:id="'tg-remind-tpl-' + ${store.id}"
              name="reminderTemplate" rows="3"
              th:text="${store.telegramSettings?.reminderTemplate}"></textarea>

    <!-- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–æ—Ç (–Ω–µ—Ç botToken) -->
    <p th:if="${store.telegramSettings == null or store.telegramSettings.botToken == null}"
       class="form-text text-muted">
        –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: {track} –∏ {store}
    </p>

    <!-- –ï—Å–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –±–æ—Ç -->
    <p th:if="${store.telegramSettings?.botToken != null}"
       class="form-text text-muted">
        –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: {track}
    </p>

    <!-- –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <p th:if="${#strings.isEmpty(store.telegramSettings?.reminderTemplate)}"
       class="form-text">
        –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: "üîî –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–±—Ä–∞—Ç—å –ø–æ—Å—ã–ª–∫—É {track} –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞ {store} ‚Äî –æ–Ω–∞ –∂–¥—ë—Ç –≤–∞—Å."
    </p>
</div>

                </div>

                <div class="mb-2">
                    <label class="form-label" th:for="'tg-sign-' + ${store.id}">
                        –ü–æ–¥–ø–∏—Å—å –∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
                    </label>
                    <input type="text" class="form-control form-control-sm" th:id="'tg-sign-' + ${store.id}"
                           name="customSignature"
                           th:value="${store.telegramSettings?.customSignature}" maxlength="200">
                </div>


                <div class="form-check form-switch mb-2 ms-3">
                    <input class="form-check-input" type="checkbox" th:id="'tg-custom-templates-' + ${store.id}"
                           name="useCustomTemplates"
                           th:checked="${store.telegramSettings?.templates?.size() > 0}"
                           th:disabled="${!planDetails.allowCustomNotifications}"
                           th:attr="data-bs-toggle=${!planDetails.allowCustomNotifications} ? 'tooltip' : null,
                                    title=${!planDetails.allowCustomNotifications} ? '–î–æ—Å—Ç—É–ø–Ω–æ –≤ —Ç–∞—Ä–∏—Ñ–µ \'–ë–∏–∑–Ω–µ—Å\' –∏ –≤—ã—à–µ' : null">
                    <label class="form-check-label" th:for="'tg-custom-templates-' + ${store.id}">
                        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                    </label>
                </div>

                <div th:id="'tg-custom-template-fields-' + ${store.id}" class="ms-4 hidden custom-template-fields" th:if="${planDetails.allowCustomNotifications}">
                    <div th:each="status : ${T(com.project.tracking_system.entity.BuyerStatus).values()}">
                        <div class="mb-2">
                            <label class="form-label" th:for="${'tpl-' + status.name() + '-' + store.id}" th:text="${status.displayName}"></label>
                            <textarea class="form-control form-control-sm"
                                      th:id="${'tpl-' + status.name() + '-' + store.id}"
                                      th:name="${'templates[' + status.name() + ']'}"
                                      rows="3"
                                      th:text="${store.telegramSettings?.templates?.get(status.name())}"></textarea>
                        </div>
                    </div>
                    <!-- –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–æ—Ç -->
<p th:if="${store.telegramSettings == null or store.telegramSettings.botToken == null}"
   class="form-text text-muted">
    –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: {track} –∏ {store}
</p>

<!-- –ï—Å–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –±–æ—Ç -->
<p th:if="${store.telegramSettings?.botToken != null}"
   class="form-text text-muted">
    –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: {track}
</p>
                </div>

                <p class="form-text text-danger mb-1" th:unless="${planDetails.allowCustomNotifications}">
                    –§—É–Ω–∫—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ "–ë–∏–∑–Ω–µ—Å" –∏ –≤—ã—à–µ
                </p>

                <button type="submit" class="btn btn-sm btn-primary w-100">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>
</th:block>


<div layout:fragment="afterFooter">
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-labelledby="deleteAccountModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-danger">
                <div class="modal-header position-relative">
                    <h5 class="modal-title text-danger w-100 text-center position-absolute start-50 translate-middle-x"
                        id="deleteAccountModalLabel">
                        –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
                    </h5>
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="modal"
                            aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger fw-semibold text-center">
                        –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ <span class="fw-bold text-uppercase">–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ</span>
                        –æ—Ç–º–µ–Ω–∏—Ç—å.
                    </p>
                </div>
                <div class="modal-footer d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <form th:action="@{/profile/settings/delete}" method="post">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                        <button class="btn btn-danger">
                            <i class="bi bi-trash-fill"></i> –î–∞, —É–¥–∞–ª–∏—Ç—å
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞-->
    <div class="modal fade" id="deleteStoreModal" tabindex="-1" aria-labelledby="deleteStoreModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content border-danger">
                <div class="modal-header">
                    <h5 class="modal-title text-danger">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger fw-semibold text-center">
                        –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ <span class="fw-bold">—É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –º–∞–≥–∞–∑–∏–Ω</span>?
                        –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ <span class="fw-bold text-uppercase">–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ</span> –æ—Ç–º–µ–Ω–∏—Ç—å.
                    </p>
                    <p class="text-muted text-center">
                        ‚ùó –í–º–µ—Å—Ç–µ —Å –º–∞–≥–∞–∑–∏–Ω–æ–º –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã <br>
                        <span class="fw-semibold">–≤—Å–µ –µ–≥–æ –ø–æ—Å—ã–ª–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</span>.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-danger" id="confirmDeleteStore">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—á–∏—Å—Ç–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
    <div class="modal fade" id="resetAnalyticsModal" tabindex="-1" aria-labelledby="resetAnalyticsModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content border-danger">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="resetAnalyticsModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="resetAnalyticsMessage"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-danger" id="confirmResetAnalytics">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

</div>

</html>
