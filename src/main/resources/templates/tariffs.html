<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <title layout:fragment="title">–¢–∞—Ä–∏—Ñ—ã</title>
</head>

<main layout:fragment="content" class="py-5">
    <div class="container-xl">

        <h1 class="text-center mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ</h1>

        <!-- üîò –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
        <div class="text-center mb-4">
            <div class="btn-group" role="group">
                <button type="button" id="btn-monthly" class="btn btn-primary">–ú–µ—Å—è—Ü</button>
                <button type="button" id="btn-yearly" class="btn btn-outline-secondary">–ì–æ–¥</button>
            </div>
        </div>

        <div class="row justify-content-center g-4">

            <div class="col-md-6 col-lg-5" th:each="plan : ${plans}">
                <div class="card h-100 shadow-sm border-0 rounded-4 d-flex flex-column">

                    <div class="card-header bg-light text-center border-0 rounded-top-4">
                        <h4 class="mb-0 fw-bold" th:text="${plan.code.displayName}"></h4>
                        <p class="mb-0 mt-2 fw-semibold text-primary price-monthly"
                           th:if="${plan.monthlyPrice != null and plan.monthlyPrice > 0}"
                           th:text="'–æ—Ç ' + #numbers.formatDecimal(plan.monthlyPrice, 2, 2) + ' BYN/–º–µ—Å'"></p>
                        <p class="mb-0 mt-2 fw-semibold price-placeholder price-monthly"
                           th:unless="${plan.monthlyPrice != null and plan.monthlyPrice > 0}">0</p>
                        <p class="mb-0 mt-2 fw-semibold text-primary price-yearly d-none"
                           th:if="${plan.annualPrice != null and plan.annualPrice > 0}"
                           th:text="'–æ—Ç ' + #numbers.formatDecimal(plan.annualPrice, 2, 2) + ' BYN/–≥–æ–¥'"></p>
                        <p class="mb-0 mt-2 fw-semibold price-placeholder price-yearly d-none"
                           th:unless="${plan.annualPrice != null and plan.annualPrice > 0}">0</p>
                    </div>

                    <div class="card-body px-4 d-flex flex-column">
                        <ul class="list-unstyled mb-4 flex-grow-1">
                            <li>üì• –¢—Ä–µ–∫–æ–≤ –≤ —Ñ–∞–π–ª–µ:
                                <strong th:text="${plan.maxTracksPerFile != null ? plan.maxTracksPerFile : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤:
                                <strong th:text="${plan.maxSavedTracks != null ? plan.maxSavedTracks : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å:
                                <strong th:text="${plan.maxTrackUpdates != null ? plan.maxTrackUpdates : '–ë–µ–∑ –ª–∏–º–∏—Ç–∞'}"></strong>
                            </li>
                            <li>üè¨ –ú–∞–≥–∞–∑–∏–Ω–æ–≤:
                                <strong th:text="${plan.maxStores}"></strong>
                            </li>
                            <li>
                                <span th:if="${plan.allowBulkUpdate}">‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                                <span th:unless="${plan.allowBulkUpdate}" class="text-muted">‚ùå –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                            </li>
                            <li>
                                <span th:if="${plan.allowTelegramNotifications}">üì® Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                <span th:unless="${plan.allowTelegramNotifications}" class="text-muted">‚ùå Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            </li>
                        </ul>

                        <form th:if="${plan.code.name() == 'PREMIUM'}" th:action="@{/tariffs/upgrade}" method="post" class="mt-auto">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <input type="hidden" id="monthsInput" name="months" value="1"/>
                            <button type="submit" id="subscribeBtn" class="btn btn-primary w-100">
                                –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Premium
                            </button>
                        </form>

                        <div th:if="${plan.code.name() == 'FREE'}" class="mt-auto">
                            <button class="btn btn-outline-secondary w-100" disabled>–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ</button>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script src="/js/tariffs.js"></script>

</main>

</html>